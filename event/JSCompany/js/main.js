// promotion swiperData

var swiperData1 = {
  1: {
    "tit": "§ 마고 & 염라의 17주년 축사 §",
    "url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/CUJJZ9j3Wqk?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
  },
  2: {
    "tit": "§ 저승컴퍼니 웹툰 3화 §",
    "url": "<div class=\"image\"><img src=\"../Promotion/images/img_slide1_1.jpg\" alt=\"웹툰 3-1\"><img src=\"../Promotion/images/img_slide1_2.jpg\" alt=\"웹툰 3-2\"><img src=\"../Promotion/images/img_slide1_3.jpg\" alt=\"웹툰 3-3\"><img src=\"../Promotion/images/img_slide1_4.jpg\" alt=\"웹툰 3-4\"><img src=\"../Promotion/images/img_slide1_5.jpg\" alt=\"웹툰 3-5\"><img src=\"../Promotion/images/img_slide1_6.jpg\" alt=\"웹툰 3-6\"></div>",
  },
  3: {
    "tit": "§ 저승컴퍼니 웹툰 2화 §",
    "url": "<div class=\"image\"><img src=\"../Promotion/images/img_slide2_1.jpg\" alt=\"웹툰 2-1\"><img src=\"../Promotion/images/img_slide2_2.jpg\" alt=\"웹툰 2-2\"><img src=\"../Promotion/images/img_slide2_3.jpg\" alt=\"웹툰 2-3\"><img src=\"../Promotion/images/img_slide2_4.jpg\" alt=\"웹툰 2-4\"></div>",
  },
  4: {
    "tit": "§ 신입 차사 오리엔테이션 §",
    "url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/oxW_SrDa1pE?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
  },
  5: {
    "tit": "§ 담연 부장 소개 §",
    "url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/BhtxYEGYj7E?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
  },
  6: {
    "tit": "§ 저승 전경 §",
    "url": "<div class=\"image\"><img src=\"../Promotion/images/img_slide5.jpg\" alt=\"저승 전경 이미지\" width=\"100%\" height=\"100%\"></div>",
  },
  7: {
    "tit": "§ 저승컴퍼니 : 프롤로그 §",
    "url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/nv_5FaVDJaw?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
  },
  8: {
    "tit": "§ 신입 차사 공개 채용 §",
    "url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/vYcXfgxKaM0?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
  },
  9: {
    "tit": "§ 저승컴퍼니 기업 광고 §",
    "url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/wHbrQOMWxik?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
  },
  10: {
    "tit": "§ 저승컴퍼니 웹툰 1화 §",
    "url": "<div class=\"image\"><img src=\"../Promotion/images/img_slide9_1.jpg\" alt=\"웹툰 1-1\"><img src=\"../Promotion/images/img_slide9_2.jpg\" alt=\"웹툰 1-2\"><img src=\"../Promotion/images/img_slide9_3.jpg\" alt=\"웹툰 1-3\"><img src=\"../Promotion/images/img_slide9_4.jpg\" alt=\"웹툰 1-4\"><img src=\"../Promotion/images/img_slide9_5.jpg\" alt=\"웹툰 1-5\"></div>",
  },
  11: {
    "tit": "§ 업데이트 트레일러 §",
    "url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/PsURbJZFQgs?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
  },
  12: {
    "tit": "§ 저승컴퍼니 건물 §",
    "url": "<div class=\"image\"><img src=\"../Promotion/images/img_slide11.jpg\" alt=\"저승컴퍼니 건물 이미지\" width=\"100%\" height=\"100%\"></div>",
  },
}


var swiperData = {
	1: {
		"tit": "§ 저승컴퍼니 웹툰 5화 §",
		"url": "<div class=\"image\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0906/images/promotion/img_webtoon5_1.jpg\" alt=\"웹툰 5-1\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0906/images/promotion/img_webtoon5_2.jpg\" alt=\"웹툰 5-2\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0906/images/promotion/img_webtoon5_3.jpg\" alt=\"웹툰 5-3\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0906/images/promotion/img_webtoon5_4.jpg\" alt=\"웹툰 5-4\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0906/images/promotion/img_webtoon5_5.jpg\" alt=\"웹툰 5-5\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0906/images/promotion/img_webtoon5_6.jpg\" alt=\"웹툰 5-6\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0906/images/promotion/img_webtoon5_7.jpg\" alt=\"웹툰 5-7\"></div>",
	},
	2: {
		"tit": "§ 저승컴퍼니 웹툰 4화 §",
		"url": "<div class=\"image\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0817/images/promotion/img_webtoon4_1.jpg\" alt=\"웹툰 4-1\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0817/images/promotion/img_webtoon4_2.jpg\" alt=\"웹툰 4-2\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0817/images/promotion/img_webtoon4_3.jpg\" alt=\"웹툰 4-3\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0817/images/promotion/img_webtoon4_4.jpg\" alt=\"웹툰 4-4\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0817/images/promotion/img_webtoon4_5.jpg\" alt=\"웹툰 4-5\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0817/images/promotion/img_webtoon4_6.jpg\" alt=\"웹툰 4-6\"></div>",
	},
	3: {
		"tit": "§ 담연 부장의 TMI 대잔치 §",
		"url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/SkNJx-VfTQo?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
	},
	4: {
		"tit": "§ 마고 & 염라의 17주년 축사 §",
		"url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/CUJJZ9j3Wqk?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
	},
	5: {
		"tit": "§ 저승컴퍼니 웹툰 3화 §",
		"url": "<div class=\"image\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide1_1.jpg\" alt=\"웹툰 3-1\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide1_2.jpg\" alt=\"웹툰 3-2\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide1_3.jpg\" alt=\"웹툰 3-3\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide1_4.jpg\" alt=\"웹툰 3-4\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide1_5.jpg\" alt=\"웹툰 3-5\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide1_6.jpg\" alt=\"웹툰 3-6\"></div>",
	},
	6: {
		"tit": "§ 저승컴퍼니 웹툰 2화 §",
		"url": "<div class=\"image\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide2_1.jpg\" alt=\"웹툰 2-1\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide2_2.jpg\" alt=\"웹툰 2-2\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide2_3.jpg\" alt=\"웹툰 2-3\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide2_4.jpg\" alt=\"웹툰 2-4\"></div>",
	},
	7: {
		"tit": "§ 신입 차사 오리엔테이션 §",
		"url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/oxW_SrDa1pE?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
	},
	8: {
		"tit": "§ 담연 부장 소개 §",
		"url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/BhtxYEGYj7E?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
	},
	9: {
		"tit": "§ 저승 전경 §",
		"url": "<div class=\"image\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide5.jpg\" alt=\"저승 전경 이미지\" width=\"100%\" height=\"100%\"></div>",
	},
	10: {
		"tit": "§ 저승컴퍼니 : 프롤로그 §",
		"url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/nv_5FaVDJaw?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
	},
	11: {
		"tit": "§ 신입 차사 공개 채용 §",
		"url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/vYcXfgxKaM0?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
	},
	12: {
		"tit": "§ 저승컴퍼니 기업 광고 §",
		"url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/wHbrQOMWxik?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
	},
	13: {
		"tit": "§ 저승컴퍼니 웹툰 1화 §",
		"url": "<div class=\"image\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide9_1.jpg\" alt=\"웹툰 1-1\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide9_2.jpg\" alt=\"웹툰 1-2\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide9_3.jpg\" alt=\"웹툰 1-3\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide9_4.jpg\" alt=\"웹툰 1-4\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide9_5.jpg\" alt=\"웹툰 1-5\"></div>",
	},
	14: {
		"tit": "§ 업데이트 트레일러 §",
		"url": "<div class=\"youtube\"><iframe src=\"https://www.youtube.com/embed/PsURbJZFQgs?enablejsapi=1&rel=0\" frameborder=\"0\" allowfullscreen></iframe></div>",
	},
	15: {
		"tit": "§ 저승컴퍼니 건물 §",
		"url": "<div class=\"image\"><img src=\"//tr-image.game.onstove.com/event/202207/06_jscompany/pc/assets_0803/images/promotion/img_slide11.jpg\" alt=\"저승컴퍼니 건물 이미지\" width=\"100%\" height=\"100%\"></div>",
	},
}

setSwiper();

// 当页面加载完元素
$(window).load(function() {
	//main
	if ($('.main').length > 0) {
		// TimelineMax 来自librarys的动画工具函数
		var titleMotion = new TimelineMax({repeat:0, delay:0.1}).add([
			TweenMax.fromTo( $('.evt-header'), 1, {height:844}, {height:764, ease:Elastic.easeOut.config(1,0.4) } ),
			TweenMax.fromTo( $('.content-body'), 1.4, {y:100, opacity:1}, {y:0, opacity:1, ease:Elastic.easeOut.config(1,0.4) } ),
		]);
	}
	//sub
	else {
		//내 정보실
		if ($('#evt_wrap.information').length > 0) trJSC.information();
	}
	initHeight();
});


// tab
function tabView(index, btn, that) {
	$(btn).removeClass('current').eq(index).addClass('current');
	$(that).removeClass('current').eq(index).addClass('current');
}


//gnb 메뉴별 활성화 제어
//gnb 菜单移入移出效果
$('.gnb > li').on('mouseover', function(e) {
  $('.lnb-area').stop().hide();
  $(this).find('.lnb-area').stop().show();
});
$('.gnb').on('mouseleave', function(e) {
  $('.lnb-area').stop().hide();
  $('.gnb > li.current').find('.lnb-area').stop().show();
});

//gnb 메뉴에 따른 페이지별 클래스 부여
//gnb 按菜单栏分配样式类名
$('.gnb > li.current').each(function() {
  var currentMenu = $(this).index();
  console.log(currentMenu)
  var className = '';
  switch(currentMenu) {
    case 0: className = 'lobby'
      break;
    case 1: className = 'information'
      break;
    case 2 : className = 'office'
      break;
    case 3 : className = 'shop'
      break;
    case 4 : className = 'promotion'
      break;
    case 5 : className = 'director'
      break;
  }
  $('#evt_wrap').addClass(className);
});


//gnb 높이 가변에 따른 lnb 상단 고정(window.onload로 해야 stove랑 미충돌)
var gnbTop;
window.onload = function() {
  console.log('onload ...')
	gnbTop = $(".gnb-wrap").offset().top;
	$(this).scrollTop() > gnbTop ? $('body').addClass('scroll') : $('body').removeClass('scroll')
	
	$(window).scroll(function(){		
		$(this).scrollTop() > gnbTop ? $('body').addClass('scroll') : $('body').removeClass('scroll')
		gnbResize();
	});

	$(window).resize(function() {
		gnbResize();
	});
	gnbResize();
};

function gnbResize() {
	//gnb fixed 여부에 따른 스타일 분기
	var isScroll = $('body').hasClass('scroll') ? - $(window).scrollLeft() : 0
	$('.gnb-wrap').css({
		left: isScroll,
		width: $('#evt_wrap').width()
	});
}

//gnb 높이 가변에 따른 event min-height 100% init
function initHeight() {
	$('#evt_wrap').css({
		'min-height': 'calc(100% - ' + $('#evt_wrap').offset().top + 'px)'
	});
}


// var isAnagram = function (s, t) {
//   if (s.length !== t.length) {
//     return false;
//   }
//   const map = new Map();
//   for (let i = 0; i<s.length;i++) {
//     if (map.has[s[i]]) {
//       map.set(s[i], map.get(s[i])+1);
//     } else {
//       map.set(s[i], 1)
//     }
//     if (map.has[t[i]]) {
//       map.set(t[i], map.get(t[i])-1);
//     } else {
//       map.set(t[i], -1)
//     }
//   }
//   for (const letter of map) {
//     console.log(letter)
//     console.log(map)
//     if (letter[1]!==0) {
//       return false;
//     }
//   }
//   return true;
// }
// isAnagram('anagram', 'nagaram')


// Promotion板块的swiper 定义
var swiper;
function setSwiper() {
	swiper = new Swiper('#swiper', {
		slidesPerView: 1,
		loop: true,
		speed : 0,
		touchRatio: 0,	//드래그 금지
		pagination: {
			el: '.swiper-pagination',
			type: "fraction",
		},
		navigation: {
			prevEl: '.swiper-button-prev',
			nextEl: '.swiper-button-next',
		},
		on: {
			init: function() {
				// console.log( this.realIndex );
			},
			slideChange: function() {
				insertSwiperData( this.realIndex +1 );
				stopSwiperYoutube();
			}
		}
	});
}
function insertSwiperData(index) {
	var title = swiperData[index]["tit"];
	$('.popup-tit').html(title);
}
function stopSwiperYoutube() {
	$('.swiper-slide').each(function () {
		var youtubePlayer = $(this).find('iframe').get(0);
		if (youtubePlayer) {
			//iframe src must contain "?enablejsapi=1" It will allow to use youtube api to pause video on slide change
			youtubePlayer.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', '*');
		}
	});
}

//회사홍보관
var isClick = 0;
$(document).on('click', '.promotion-area li button', function() {
	var idx = $(this).parents('li').attr('data-slide-num');
	popup('[data-popup-id=promotion]');

	$('#swiper .swiper-slide').each(function(e) {
		if ( isClick == 0 ) {
			var dataNum = $(this).attr('data-slide-num');
			var data = swiperData[dataNum]["url"];
			$(this).html(data);
		}			
	});
	insertSwiperData(idx);
	isClick = 1;
	swiper.slideTo(idx);

	//개발 호출 함수
	// fnCallGA(idx);
});


//Popup
var $popup;
function popup(obj, msgNum, url) {
	$popup = $(obj);
	$popup.attr('tabindex', 0).addClass('show').focus();
	$popup.blur(function() {
		$(this).removeAttr('tabindex');
	});
	var targetY = $(window).scrollTop()+100;
		h = $popup.outerHeight()/2, w = $popup.outerWidth()/2;
		
	//알럿&컨펌 팝업의 경우 모달형식으로 띄움
	if ( $popup.attr('data-popup-type') == 'modal' ) {
		$('body').addClass('modal');
		$popup.find('.popup-msg').html(msgNum);
		$popup.addClass("show");
	}
	else {
		$('body').addClass('dimmed');
		$popup.addClass("show").css({top:targetY,opacity:1});
	}

	if ( $popup.attr('data-popup-type') == 'youtube') {
		$popup.find('.iframe').empty().append('<iframe src="https://www.youtube.com/embed/'+url+'?autoplay=0&rel=0&amp;controls=1&amp;showinfo=0&amp;color=white" allow="autoplay; encrypted-media" width="100%" height="100%" allowfullscreen></iframe>');
	}
	return false;
}


// popupClose
function popupClose(that) {
	$("body").removeClass("dimmed").unbind('touchmove');
	var type = typeof(that); //this == "object"
	if ( type == "object" ) {
		$(that).parents('.popup, .talk-modal').removeAttr("style").removeClass("show");
		$(that).parents('.popup, .talk-modal').find(".iframe iframe").remove();
		if ($(that).parents('.popup, .talk-modal').attr('data-popup-type') == 'modal') {
			$('body').removeClass('modal');
		}
		else {
			$('body').removeClass('dimmed');
		}

		// if ( $(that).parents('.popup, .talk-modal').attr('data-popup-type') == 'item') {
		// 	if ( $(that).parents('.popup, .talk-modal').attr('data-popup-re') != 're') {
		// 		document.location.reload();
		// 	}
		// }
		if ( $popup.attr('data-popup-id') == 'promotion') {
			stopSwiperYoutube();
		}
	} else {
		$(that).parents('.popup').removeAttr("style").removeClass("show");
	}
}


function popupYoutube(obj, url, msgNum, isOpend) {
	$popup = $(obj);
	$popup.attr('tabindex', 0).addClass('show').focus();
	$popup.blur(function() {
		$(this).removeAttr('tabindex');
	});
	var targetY = $(window).scrollTop()+100;
		h = $popup.outerHeight()/2, w = $popup.outerWidth()/2;
		
	$('body').addClass('dimmed');
	$popup.find('.popup-msg').html(msgNum);
	$popup.addClass("show").css({top:targetY,opacity:1});
	$popup.find('.iframe').empty().append('<iframe src="https://www.youtube.com/embed/'+url+'?autoplay=0&rel=0&amp;controls=1&amp;showinfo=0&amp;color=white" allow="autoplay; encrypted-media" width="100%" height="100%" allowfullscreen></iframe>');
	$popup.attr('data-popup-re','').attr('data-popup-re',isOpend);
	return false;
}


var trJSC = {
	//내 정보실	
	information: function() {	
		//사원정보 - 발령이력 TAB
		$(document).on('click', '.record .tab li', function() {
			tabView($(this).index(), $('.record .tab li'), $('.record .tab-content'));
		});
		//팀 전배신청 POPUP TAB
		$(document).on('click', '[data-popup-id="team-move"] .tab li', function() {
			tabView($(this).index(), $('[data-popup-id="team-move"] .tab li'), $('[data-popup-id="team-move"] .tab-content'));
		});
		//캡쳐 다운로드 	
		$('.btns button').click(function() {	
			$('.btns button').removeClass('on');
			$(this).addClass('on');
		});			
		$('.btns .btn1').click(function() {					
			$('#downloadImage').addClass('employee-Id');
			$('#downloadImage').removeClass('character-box');
			return false;
		});
		$('.btns .btn2').click(function() {					
			$('#downloadImage').addClass('character-box');
			$('#downloadImage').removeClass('employee-Id');
			return false;
		});
	},
	office: function() {
		// 做一下动画过渡(页面已经关闭了 )
		//팀 업무 성과 그래프 효과
		$('.bar').each(function(e) {
			var per = $(this).attr('data-per') + '%';
			TweenMax.fromTo( $(this), 0.4, {height:0}, {height:per, delay:e*0.04 } );
		});
		//주간 업무 탭
		$(document).on('click', '.weekly-state .tab-area li button', function() {
			tabView($(this).parents('li').index(), $('.weekly-state .tab-area li'), $('.weekly-mission .tab-content'));
		});
	}

}



// office
//토글 클래스
function toggleCls(className, obj) {
	$(obj).toggleClass(className);
}
function toggleSlide(className, that, obj) {
	$(that).toggleClass(className);
	$(obj).slideToggle('fast');
}

//디자인 셀렉트 박스 토글
$(document).on('click', '.selectbox-header', function() {
	var $this = $(this).parents('.selectbox');
	$('.selectbox').not($this).each(function() {
		$(this).find('.selectbox-header').removeClass('open');
		$(this).find('.selectbox-body').hide();
	});
	$(this).toggleClass('open');
	$(this).next('.selectbox-body').toggle();
});
$(document).on('click', '.selectbox .selectbox-body button', function() {
	var selextedTxt = $(this).text();
	var selextedValue = $(this).attr('value') != '' ? $(this).attr('value') : '';
	$(this).parents('.selectbox').find('.selectbox-header').text(selextedTxt).attr('value',selextedValue);
	$(this).parents('.selectbox').find('.selectbox-header').removeClass('open');
	$(this).parents('.selectbox-body').hide();
});
$(document).on('click', function(e) {
	var $tgPoint = $(e.target);
	if ( !$tgPoint.parents().hasClass('selectbox') ) {
		$(".selectbox").find(".selectbox-header").removeClass("open");
		$(".selectbox-body").hide();
	}
});


//평가 등급 팝업
var imgSrc;
function popupItem(obj, weekNum, gradeNum, imgName, itemName, winNum, loseNum) {
	$popup = $(obj);
	var targetY = $(window).scrollTop()+100;
		h = $popup.outerHeight()/2, w = $popup.outerWidth()/2;
		

	$popup.addClass("show").css({top:targetY,opacity:1});
	$("body").addClass("dimmed");

	imgSrc = imgSrc ? imgSrc : "../assets/images/items/";
	if (imgName === 'coin' ) {
		imgSrc = '../images/information/'
	} 
	$popup.find('.item-img').html('<img src="' + imgSrc + imgName + '.jpg" alt="item image">');
	$popup.find('.item-name').html(itemName);
	$('.itembox, .popup-caution').show();

	var grade = '';
	switch(gradeNum) {
		case 'S': 
			grade = 1
			gradeNum = 'S <small>(우수사원)</small>'
			break;
		case 'A': grade = 2
			break;
		case 'B': grade = 3
			break;
		case 'C': grade = 4
			break;
		case 'F': 
			grade = 5
			$('.itembox, .popup-caution').hide();
			break;
		default: grade = 0
			break;
	}
	$popup.find('.grade-txt strong').html(gradeNum);
	$popup.find('.grade-msg').attr('data-grade',grade);
	$popup.find('.item-name').html(itemName);
	$popup.attr('data-week',weekNum);
	$popup.find('.grade-msg span:first-child').attr('data-grade',winNum);
	$popup.find('.grade-msg span:last-child').attr('data-grade',loseNum);
}


var layerJobEvaluationPersonClose = function (obj) {
	popupClose(obj);
}

var layerJobEvaluationTeamClose = function (obj) {
	popupClose(obj);
}


var getItem = function(type, stepNo) {
	let data = {}
	if (type === 'TEAM_ITEM') {
		data = {"Result": "OK_GET_ITEM", "Msg": "", "Param1": "4", "Param2": "TEAM_ITEM", "Param3": "3", "Param4": "저승관리팀|5|1|3"}
	} else if (type === 'PERSON_ITEM') {
		data = {"Result": "OK_GET_ITEM", "Msg": "", "Param1": "4", "Param2": "PERSON_ITEM", "Param3": "25", "Param4": "S"}
	}
	// 模拟ajax请求
	// 接口地址是
	// /event/JSCompany/Information/j_send_item.asp, params
	// var params = { type: type, esno: stepNo }
	var result = data.Result;
	var retMsg = data.Msg;
	var retParam1 = data.Param1;
	var retParam2 = data.Param2;
	var retParam3 = data.Param3;
	var retParam4 = data.Param4;
	if (result == 'OK_GET_ITEM') {
		if (retParam2 == 'TEAM_ITEM') {
				popupItem('[data-popup-id=team]', retParam1, retParam4.split('|')[0] + ' / ' + retParam4.split('|')[1] + '위', 'coin', '엽전 뭉치 <em>' + retParam3 + '개</em>', retParam4.split('|')[2], retParam4.split('|')[3]);
		} else {
				popupItem('[data-popup-id=personal]', retParam1, retParam4, 'coin', '엽전 뭉치 <em>' + retParam3 + '개</em>');
		}

		// isClickChkSet_Send_Item();
		return true;
	}
}